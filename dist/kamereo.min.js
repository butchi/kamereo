"use strict";function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function getColorArr(r){if(r.match(/^#[0-9a-fA-F]+$/)||r.match(/^[a-zA-Z]+$/))return[r];var e=void 0;r=r.replace(/\'/g,'"');try{e=JSON.parse(r)}catch(t){console.error("invalid color.")}return e}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function r(r,e){var t=[],o=!0,a=!1,n=void 0;try{for(var i,l=r[Symbol.iterator]();!(o=(i=l.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(c){a=!0,n=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw n}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();require("whatwg-fetch");var KamereoCore=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r),this.initialize(e)}return _createClass(r,[{key:"initialize",value:function(){var r=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.elm=e.elm,this.src=this.elm.getAttribute("data-src");var t=e.from,o=e.to,a=this.elm.getAttribute("data-color-from"),n=this.elm.getAttribute("data-color-to");a&&(this.fromArr=getColorArr(a)),null==t||("string"==typeof t?this.fromArr=[t]:t instanceof Array&&(this.fromArr=t)),n&&(this.toArr=getColorArr(n)),null==o||("string"==typeof o?this.toArr=[o]:o instanceof Array&&(this.toArr=o)),this.apply=e.apply,fetch(this.src).then(function(r){return r.text()}).then(function(e){var t=new DOMParser,o=t.parseFromString(e,"image/svg+xml");if("function"==typeof r.apply){o=r.apply(o);var a=new XMLSerializer;e=a.serializeToString(o)}var n=e;if(r.fromArr&&r.toArr)if(1===r.toArr.length)for(var i=0;i<r.fromArr.length;i++)n=n.replace(r.fromArr[i],r.toArr[0]);else for(var l=Math.min(r.fromArr.length,r.toArr.length),c=0;c<l;c++)n=n.replace(r.fromArr[c],r.toArr[c]);var s=encodeURIComponent(n);r.elm.style["background-image"]='url("data:image/svg+xml,'+s+'")';var f=e.match(/viewBox="([0-9]+) ([0-9]+) ([0-9]+) ([0-9]+)"/).slice(3,5),u=_slicedToArray(f,2),h=u[0],m=u[1];r.elm.style.width=h+"px",r.elm.style.height=m+"px"})}}]),r}();if(exports["default"]=KamereoCore,global.document){var elmArr=document.querySelectorAll("[data-kamereo-element]");[].forEach.call(elmArr,function(r){new Kamereo({elm:r})})}jQuery&&(jQuery.fn.kamereo=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.elm=this[0],new Kamereo(r)});